parameter[custom_attribute1] = Quadrupole::MY_CUSTOM
parameter[custom_attribute2] = Quadrupole::QQQ
parameter[custom_attribute2] = Parameter::ABC
parameter[custom_attribute3] = ZZZ

parameter[ABC] = 17
parameter[lattice]     = "L9A18A000-_MOVEREC"
parameter[geometry] = Open            

parameter[p0c]                      = 1E12
parameter[particle]                 = Proton
parameter[absolute_time_tracking]    = F
bmad_com[max_aperture_limit] = 23.5
bmad_com[conserve_taylor_maps] = F
bmad_com[convert_to_kinetic_momentum] = T
ptc_com[max_fringe_order] = -1

beginning[beta_a]    = 10
beginning[beta_b]    = 10

xxx = 1

!-------------------------------------------------------

AA: Quadrupole, L = 1, K1 = 2, VKICK = -2.016995113499E-4, DS_STEP = 0.14285714285714, MY_CUSTOM = 123,
   QQQ = 3, tracking_method = Symp_Lie_Bmad
BB: Quadrupole, L = 2, K1 = 1, MY_CUSTOM = 123, QQQ = 3, tracking_method = Runge_Kutta
CC: Sextupole, K2 = 3, tracking_method = Runge_Kutta
slave_drift_0_6: drift, l = 0.25
slave_drift_0_7: drift, l = 0.1
slave_drift_0_8: drift, l = 0.3
slave_drift_0_9: drift, l = 0.1
slave_drift_0_10: drift, l = 0.25
SBEND0: Sbend, grid_field = call::sbend0.grid_field.h5, aperture = 3, tracking_method = Runge_Kutta,
   field_calc = FieldMap
TT: Taylor, aperture = 3, {S1: 0.4, 1 0 1 0 0 0}, {Sx: 0.1, 0 0 0 0 0 0}
M2: Mask, wall = call::wall_m2, aperture = 1.00100004673
AAA: AC_Kicker, amp_vs_time = {(-1E-8, 1), (2E-8, 0.7)}, L = 0.3, HKICK = 0.01, aperture = 3,
   tracking_method = Runge_Kutta
BBB: AC_Kicker, frequencies = {(1.2E7, 1, 0.1), (2E7, 0.7, 0.2)}, L = 0.3, HKICK = 0.01, aperture = 3,
   tracking_method = Runge_Kutta
PP: Pipe, L = 1
Q1: Quadrupole, L = 0.1
Q2: Quadrupole, L = 0.1
QQ: Pipe, L = 1
QA: Quadrupole, L = 1
GRD: girder = {M_END1,QA,M_IN,QB,M_END2}

!-------------------------------------------------------
! Branch: PHOT

DDD#1: Drift, L = 3
MP: Marker
DDD#2: Drift, L = 7
CAP: Capillary, wall = call::wall_cap, aperture = 3
CRY: Crystal, PSI_ANGLE = 2.1, B_PARAM = -1.1, THICKNESS = 2.1, crystal_type = Si(111)
FF: Fork, to_line = F_LINE

!-------------------------------------------------------
! Branch: F_LINE

slave_drift_2_1: drift, l = 0.8
MK: Marker
slave_drift_2_3: drift, l = 0.2
GF: Fork, to_line = G_LINE

!-------------------------------------------------------
! Branch: G_LINE

DDD: Drift, L = 10

!-------------------------------------------------------
! Branch: TAG_LINE

T1.CC: Sextupole, K2 = 3, tracking_method = Runge_Kutta
T1.QQ: Pipe, L = 1
T2.CC: Sextupole, K2 = 3, tracking_method = Runge_Kutta
T2.QQ: Pipe, L = 1

!-------------------------------------------------------
! Branch: GROUP_LINE

M_END1: Marker
slave_drift_5_2: drift, l = 0.5
M_IN: Marker
slave_drift_5_4: drift, l = 0.5
QB: Quadrupole, L = 1
M_END2: Marker

!-------------------------------------------------------
! Overlays, groups, rampers, and superimpose

superimpose, element = PP, ref = slave_drift_0_6, offset = 0.375
superimpose, element = Q1, ref = slave_drift_0_7, offset = 0
superimpose, element = Q2, ref = slave_drift_0_9, offset = 0
superimpose, element = QQ, ref = slave_drift_2_1, offset = 0.1
superimpose, element = QA, ref = slave_drift_5_2, offset = 0.25
GANG0: group = {AA[TILT], BB[TILT]}, var = {T}, T = 3, old_T = 3
GANG1: group = {AA[TILT], BB[TILT]}, var = {T}, gang = False
G_CC: group = {CC[ACCORDION_EDGE]}, var = {COMMAND}
OV1: overlay = {AA}, var = {HKICK}
OV2: overlay = {AA: -2*HKICK}, var = {HKICK}
GR1: group = {AA: -vkick^2/c_light*xxx/mass_of(proton)}, var = {VKICK}, VKICK = 1E-10, old_VKICK = 1E-10
GR2: group = {AA: k1, AA[TILT]: tilt}, var = {K1, TILT}
GR3: group = {AA: -vkick^2*mass_of(proton)}, var = {VKICK}, VKICK = 4.6364760900081E-7,
   old_VKICK = 4.6364760900081E-7

!-------------------------------------------------------
! Lattice lines


LL: line = ( AA, AA, BB, BB, CC, slave_drift_0_6, slave_drift_0_7, slave_drift_0_8, slave_drift_0_9,
   slave_drift_0_10, SBEND0, TT, M2, AAA, BBB)

PHOT: line = ( DDD#1, MP, DDD#2, CAP, CRY, FF)

PHOT[geometry] = Open
PHOT[beta_a]   = 10
PHOT[beta_b]   = 10
PHOT[particle] = Photon
PHOT[p0c]      = 10000

F_LINE: line = ( slave_drift_2_1, MK, slave_drift_2_3, GF)

F_LINE[geometry] = Open
F_LINE[z_position]     = 11
F_LINE[theta_position] = -0.39810458778376
F_LINE[p0c]      = 10000
F_LINE[inherit_from_fork]      = T

G_LINE: line = ( DDD)

G_LINE[geometry] = Open
G_LINE[x_position]     = -0.38767185358451
G_LINE[z_position]     = 11.921797447349
G_LINE[theta_position] = -0.39810458778376
G_LINE[p0c]      = 10000
G_LINE[inherit_from_fork]      = T

TAG_LINE: line = ( T1.CC, T1.QQ, T2.CC, T2.QQ)

TAG_LINE[geometry] = Open
TAG_LINE[live_branch] = F
TAG_LINE[beta_a]   = 10
TAG_LINE[beta_b]   = 10
TAG_LINE[particle] = Proton
TAG_LINE[p0c]      = 1E12

GROUP_LINE: line = ( M_END1, slave_drift_5_2, M_IN, slave_drift_5_4, QB, M_END2)

GROUP_LINE[geometry] = Closed
GROUP_LINE[particle] = Electron
GROUP_LINE[p0c]      = 1E9

use, LL, PHOT, TAG_LINE, GROUP_LINE
